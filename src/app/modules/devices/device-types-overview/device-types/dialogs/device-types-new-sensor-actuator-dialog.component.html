<!--
  ~
  ~  Copyright 2019 InfAI (CC SES)
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  -->

<h2 mat-dialog-title>Create new Sensor/Actuator</h2>

<mat-dialog-content>
    <form class="form">
        <mat-radio-group aria-label="Select an option" [formControl]="optionsCtrl">
            <mat-radio-button value="sensor">Sensor</mat-radio-button>
            <mat-radio-button value="actuator">Actuator</mat-radio-button>
        </mat-radio-group>
        <mat-form-field class="full-width" color="accent">
            <mat-label>Label</mat-label>
            <input #input matInput placeholder="Label" required>
        </mat-form-field>

        <table class="full-width" cellspacing="0">
            <tr>
                <td *ngIf="hideAddProperty === false">
                    <mat-form-field class="full-width" color="accent">
                        <mat-select placeholder="Select Property" [compareWith]="compareUri"
                                    [formControl]="propertyCtrl" required>
                            <mat-option *ngFor="let property of properties"
                                        [value]="property">
                                {{property.label}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </td>
                <td *ngIf="hideAddProperty === false" class="table-button-size">
                    <button mat-icon-button class="mat-accent" (click)="showPropertyInput(true)">
                        <mat-icon matTooltip="create new property">playlist_add</mat-icon>
                    </button>
                </td>
                <td *ngIf="hideAddProperty === true">
                    <mat-form-field class="full-width" color="accent">
                        <input type="text" matInput placeholder="Please insert property" [formControl]="propertyInputCtrl">
                    </mat-form-field>
                </td>
                <td *ngIf="hideAddProperty === true" class="table-button-size">
                    <button mat-icon-button [disabled]="propertyInputCtrl.value === ''" class="mat-accent" (click)="addProperty()">
                        <mat-icon matTooltip="add property">add</mat-icon>
                    </button>
                </td>
                <td *ngIf="hideAddProperty === true" class="table-button-size">
                    <button mat-icon-button class="mat-accent" (click)="showPropertyInput(false)">
                        <mat-icon matTooltip="return to list">undo</mat-icon>
                    </button>
                </td>
            </tr>
        </table>

        <table class="full-width" cellspacing="0">
            <tr>
                <td *ngIf="hideAddFeatureOfInterest === false">
                    <mat-form-field class="full-width" color="accent">
                        <mat-select placeholder="Select Feature of Interest" [compareWith]="compareUri"
                                    [formControl]="featureOfInterestCtrl" required>
                            <mat-option *ngFor="let featureOfInterest of featureOfInterests"
                                        [value]="featureOfInterest">
                                {{featureOfInterest.label}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </td>
                <td *ngIf="hideAddFeatureOfInterest === false" class="table-button-size">
                    <button mat-icon-button class="mat-accent" (click)="showFeatureOfInterestInput(true)">
                        <mat-icon matTooltip="create new feature of interest">playlist_add</mat-icon>
                    </button>
                </td>
                <td *ngIf="hideAddFeatureOfInterest === true">
                    <mat-form-field class="full-width" color="accent">
                        <input type="text" matInput placeholder="Please insert feature of interest" [formControl]="featureOfInterestInputCtrl">
                    </mat-form-field>
                </td>
                <td *ngIf="hideAddFeatureOfInterest === true" class="table-button-size">
                    <button mat-icon-button [disabled]="featureOfInterestInputCtrl.value === ''" class="mat-accent" (click)="addFeatureOfInterest()">
                        <mat-icon matTooltip="add feature of interest">add</mat-icon>
                    </button>
                </td>
                <td *ngIf="hideAddFeatureOfInterest === true" class="table-button-size">
                    <button mat-icon-button class="mat-accent" (click)="showFeatureOfInterestInput(false)">
                        <mat-icon matTooltip="return to list">undo</mat-icon>
                    </button>
                </td>
            </tr>
        </table>

    </form>
</mat-dialog-content>

<mat-dialog-actions fxLayoutAlign="end center">
    <button class="mat-raised-button color-accent" (click)="close()">Cancel</button>
    <button class="mat-raised-button mat-accent" (click)="save(input.value)">Save</button>
</mat-dialog-actions>