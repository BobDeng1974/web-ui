<!--
  ~ Copyright 2018 InfAI (CC SES)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="main-panel">
    <div class="layout-margin" fxLayout="column" *ngIf="inputs.length > 0">
        <div fxLayout="column" *ngFor="let input of inputs; let key = index">
            <div fxFill fxLayout="column">
                <div fxLayout="row">
                    <h3 fxFlex class="layout-margin">{{input.id}} - {{input.name}}</h3>
                </div>
                <mat-divider class="no-margin"></mat-divider>
                <div fxLayout="column">
                </div>
            </div>
            <div fxLayout="column" *ngFor="let port of input.inPorts">
                {{ port }}
                <mat-form-field fxFlex color="accent" appearance="outline">
                    <mat-select (ngModelChange)="deviceChanged($event, input.id, port)" placeholder="Device" [(ngModel)]="selectedValues.get(input.id).get(port).device">
                        <mat-option *ngFor="let device of devices" [value]="device">
                            {{device.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field fxFlex color="accent" appearance="outline">
                    <mat-select placeholder="Service" [(ngModel)]="selectedValues.get(input.id).get(port).service">
                        <mat-option *ngFor="let service of deviceTypes[input.id][port].services" [value]="service">
                            {{service.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field fxFill color="accent" appearance="outline">
                    <mat-label>path</mat-label>
                    <input matInput [(ngModel)]="selectedValues.get(input.id).get(port).path" placeholder="path">
                </mat-form-field>
            </div>
        </div>
        <div fxLayout="row" fxLayoutAlign="start center" style="margin-top:8px;">
            <button mat-raised-button color="accent" (click)="startPipeline()">Start</button>
        </div>
    </div>
</div>